---
config:
  theme: default
  look: classic
---
sequenceDiagram
    autonumber
    actor User as Khách hàng
    participant View
    participant Ctrl as Controller
    participant DB as Database

    Note over User,DB: Đăng nhập
    User->>View: Truy cập trang đăng nhập
    View-->>User: Hiển thị form đăng nhập

    User->>View: Nhập email & password
    View->>Ctrl: Gửi yêu cầu đăng nhập
    Ctrl->>DB: Tìm user theo email

    alt Thông tin đúng & đã kích hoạt
        Ctrl->>Ctrl: Kiểm tra password
        Ctrl->>Ctrl: Tạo phiên đăng nhập
        Ctrl->>DB: Merge giỏ hàng vào tài khoản
        Ctrl-->>View: Chuyển về trang chủ
        View-->>User: Đăng nhập thành công
    else Sai thông tin
        Ctrl-->>View: "Thông tin không chính xác"
        View-->>User: Hiển thị lỗi
    else Chưa kích hoạt
        Ctrl-->>View: "Vui lòng kích hoạt tài khoản"
        View-->>User: Hiển thị lỗi
    end
