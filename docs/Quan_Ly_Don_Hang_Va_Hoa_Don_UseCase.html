<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Use Case - Quản lý Đơn hàng & Hóa đơn</title>
    <style>
        body { font-family: 'Times New Roman', Times, serif; margin: 40px; }
        h1 { text-align: center; font-size: 20pt; }
        h2 { font-size: 14pt; margin-top: 20px; border-bottom: 1px solid #000; }
        h3 { font-size: 12pt; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        table, th, td { border: 1px solid #000; }
        th, td { padding: 8px; text-align: left; }
        ul, ol { margin-left: 20px; }
    </style>
</head>
<body>

<h1>Use Case - Quản lý Đơn hàng & Hóa đơn</h1>

<h2>1. Thông tin Use Case chính</h2>
<table>
    <tr><th style="width:30%">Tên Use Case</th><td>Quản lý Đơn hàng & Hóa đơn</td></tr>
    <tr><th>Actor</th><td>Admin</td></tr>
    <tr><th>Mô tả</th><td>Quản lý thông tin đơn hàng, cập nhật trạng thái, in và gửi hóa đơn</td></tr>
    <tr><th>Pre-conditions</th><td>Actor đã đăng nhập</td></tr>
    <tr><th>Post-conditions</th><td><b>Success:</b> Thông tin đơn hàng được cập nhật hoặc hiển thị<br/><b>Fail:</b> Thông báo lỗi</td></tr>
</table>

<h2>2. Luồng sự kiện chính</h2>
<ol>
    <li>Actor truy cập trang quản lý đơn hàng.</li>
    <li>Hệ thống hiển thị danh sách đơn hàng.</li>
    <li>Actor có thể:
        <ul>
            <li>Extend Use Case: Xem danh sách đơn hàng</li>
            <li>Extend Use Case: Xem chi tiết đơn hàng</li>
            <li>Extend Use Case: Cập nhật trạng thái đơn hàng</li>
            <li>Extend Use Case: In hóa đơn</li>
            <li>Extend Use Case: Gửi hóa đơn qua email</li>
            <li>Extend Use Case: Hủy đơn hàng</li>
        </ul>
    </li>
</ol>

<h2>3. Luồng sự kiện phụ</h2>
<p>Hệ thống lưu lịch sử thay đổi trạng thái đơn hàng.</p>

<h2>4. Extend Use Case: Xem danh sách đơn hàng</h2>
<h3>Mô tả</h3>
<p>Actor xem tất cả đơn hàng trong hệ thống.</p>

<h3>Luồng sự kiện chính</h3>
<ol>
    <li>Hệ thống hiển thị danh sách đơn hàng với các thông tin:
        <ul>
            <li>Mã đơn hàng.</li>
            <li>Tên khách hàng.</li>
            <li>Ngày đặt hàng.</li>
            <li>Tổng tiền.</li>
            <li>Trạng thái đơn hàng.</li>
        </ul>
    </li>
</ol>

<h2>5. Extend Use Case: Xem chi tiết đơn hàng</h2>
<h3>Mô tả</h3>
<p>Actor xem thông tin chi tiết của một đơn hàng.</p>

<h3>Luồng sự kiện chính</h3>
<ol>
    <li>Actor nhấn vào đơn hàng cần xem.</li>
    <li>Hệ thống hiển thị chi tiết:
        <ul>
            <li>Thông tin khách hàng.</li>
            <li>Địa chỉ giao hàng.</li>
            <li>Danh sách sản phẩm (tên, màu, size, số lượng, giá).</li>
            <li>Tổng tiền, phí vận chuyển.</li>
            <li>Phương thức thanh toán.</li>
            <li>Trạng thái đơn hàng.</li>
            <li>Lịch sử thay đổi trạng thái.</li>
        </ul>
    </li>
</ol>

<h2>6. Extend Use Case: Cập nhật trạng thái đơn hàng</h2>
<h3>Mô tả</h3>
<p>Admin cập nhật trạng thái xử lý đơn hàng.</p>

<h3>Luồng sự kiện chính</h3>
<ol>
    <li>Admin chọn đơn hàng cần cập nhật.</li>
    <li>Admin chọn trạng thái mới (processing, shipped, delivered, cancelled).</li>
    <li>Hệ thống kiểm tra:
        <ul>
            <li><b>Rẽ nhánh 1:</b> Trạng thái hợp lệ
                <ul>
                    <li>Cập nhật trạng thái đơn hàng.</li>
                    <li>Lưu lịch sử thay đổi trạng thái.</li>
                    <li>Thông báo "Cập nhật trạng thái thành công".</li>
                </ul>
            </li>
            <li><b>Rẽ nhánh 2:</b> Đơn hàng đã hủy hoặc hoàn thành
                <ul>
                    <li>Thông báo "Không thể cập nhật đơn hàng này".</li>
                </ul>
            </li>
        </ul>
    </li>
</ol>

<h2>7. Extend Use Case: In hóa đơn</h2>
<h3>Mô tả</h3>
<p>Actor in hóa đơn đơn hàng.</p>

<h3>Luồng sự kiện chính</h3>
<ol>
    <li>Actor nhấn nút "In hóa đơn" tại trang chi tiết đơn hàng.</li>
    <li>Hệ thống tạo hóa đơn định dạng in:
        <ul>
            <li>Thông tin cửa hàng (logo, tên, địa chỉ).</li>
            <li>Mã đơn hàng và ngày đặt.</li>
            <li>Thông tin khách hàng và địa chỉ giao hàng.</li>
            <li>Bảng chi tiết sản phẩm.</li>
            <li>Tổng tiền, phí ship, tổng thanh toán.</li>
        </ul>
    </li>
    <li>Hiển thị dialog in của trình duyệt.</li>
    <li>Actor chọn máy in và nhấn "In".</li>
</ol>

<h2>8. Extend Use Case: Gửi hóa đơn qua email</h2>
<h3>Mô tả</h3>
<p>Admin gửi hóa đơn đến email khách hàng.</p>

<h3>Luồng sự kiện chính</h3>
<ol>
    <li>Admin nhấn nút "Gửi hóa đơn" tại trang chi tiết đơn hàng.</li>
    <li>Hệ thống kiểm tra:
        <ul>
            <li><b>Rẽ nhánh 1:</b> Email khách hàng hợp lệ
                <ul>
                    <li>Tạo nội dung email với hóa đơn HTML.</li>
                    <li>Gửi email đến khách hàng.</li>
                    <li>Thông báo "Đã gửi hóa đơn thành công".</li>
                </ul>
            </li>
            <li><b>Rẽ nhánh 2:</b> Gửi email thất bại
                <ul>
                    <li>Thông báo "Không thể gửi email, vui lòng thử lại".</li>
                </ul>
            </li>
        </ul>
    </li>
</ol>

<h2>9. Extend Use Case: Hủy đơn hàng</h2>
<h3>Mô tả</h3>
<p>Admin hủy đơn hàng.</p>

<h3>Luồng sự kiện chính</h3>
<ol>
    <li>Actor nhấn nút "Hủy đơn hàng".</li>
    <li>Hệ thống kiểm tra:
        <ul>
            <li><b>Rẽ nhánh 1:</b> Đơn hàng có trạng thái pending
                <ul>
                    <li>Cập nhật trạng thái thành cancelled.</li>
                    <li>Hoàn lại stock sản phẩm.</li>
                    <li>Lưu lịch sử thay đổi trạng thái.</li>
                    <li>Thông báo "Đã hủy đơn hàng thành công".</li>
                </ul>
            </li>
            <li><b>Rẽ nhánh 2:</b> Đơn hàng đã xử lý (processing/shipped)
                <ul>
                    <li>Thông báo "Không thể hủy đơn hàng đang xử lý".</li>
                </ul>
            </li>
            <li><b>Rẽ nhánh 3:</b> Đơn hàng đã hoàn thành hoặc đã hủy
                <ul>
                    <li>Thông báo "Không thể hủy đơn hàng này".</li>
                </ul>
            </li>
        </ul>
    </li>
</ol>

</body>
</html>
